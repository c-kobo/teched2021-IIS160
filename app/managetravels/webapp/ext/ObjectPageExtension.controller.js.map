{"version":3,"file":"ObjectPageExtension.controller.js","names":["ControllerExtension","extend","override","editFlow","onBeforeSave","console","log","getView","getBindingContext","getProperty","Promise","resolve","reject","mSettings","id","name","controller","Object","contextPath","initialBindingContext","oApproveDialog","base","getExtensionAPI","loadFragment","buttons","getButtons","saveButton","find","obj","getId","attachPress","close","destroy","cancelButton","bind","open"],"sources":["../../src/ext/ObjectPageExtension.controller.ts"],"sourcesContent":["import Dialog from \"sap/m/Dialog\";\nimport ControllerExtension from \"sap/ui/core/mvc/ControllerExtension\";\n\nexport default ControllerExtension.extend(\"sap.fe.cap.managetravels.ext.ObjectPageExtension\", {\n\toverride: {\n\t\teditFlow: {\n\t\t\tonBeforeSave: function () {\n\t\t\t\t//Check on green flights\n\t\t\t\tconsole.log(\"test\");\n\t\t\t\tif (!this.getView().getBindingContext().getProperty('GoGreen')) {\n\t\t\t\t\treturn new Promise (async (resolve, reject) => {\n\t\t\t\t\t\tvar mSettings = {\n\t\t\t\t\t\t\tid: \"myFragment\",\n\t\t\t\t\t\t\tname: \"sap.fe.cap.managetravels.ext.fragment.Trees4Tickets\",\n\t\t\t\t\t\t\tcontroller: Object,\n\t\t\t\t\t\t\tcontextPath: \"\",\n\t\t\t\t\t\t\tinitialBindingContext: this.getView().getBindingContext()\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//\"this as any\" -> this doesn't have access to the fe core ExtensionAPI\n\t\t\t\t\t\tvar oApproveDialog = await (this as any).base.getExtensionAPI().loadFragment(mSettings) as Dialog;\n\t\t\t\t\t\tlet buttons = oApproveDialog.getButtons();\n\t\t\t\t\t\tlet saveButton = buttons.find((obj => obj.getId() === \"myFragment--Save\"));\n\t\t\t\t\t\tsaveButton.attachPress(function () {\n\t\t\t\t\t\t\toApproveDialog.close();\n\t\t\t\t\t\t\toApproveDialog.destroy();\n\t\t\t\t\t\t\treturn resolve(null);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tlet cancelButton = buttons.find((obj => obj.getId() === \"myFragment--Cancel\"));\n\t\t\t\t\t\tcancelButton.attachPress(function () {\n\t\t\t\t\t\t\toApproveDialog.close();\n\t\t\t\t\t\t\toApproveDialog.destroy();\n\t\t\t\t\t\t\treturn reject();\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\toApproveDialog.open();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n"],"mappings":";kBAGeA,mBAAmB,CAACC,MAApB,CAA2B,kDAA3B,EAA+E;IAC7FC,QAAQ,EAAE;MACTC,QAAQ,EAAE;QACTC,YAAY,EAAE,YAAY;UACzB;UACAC,OAAO,CAACC,GAAR,CAAY,MAAZ;;UACA,IAAI,CAAC,KAAKC,OAAL,GAAeC,iBAAf,GAAmCC,WAAnC,CAA+C,SAA/C,CAAL,EAAgE;YAC/D,OAAO,IAAIC,OAAJ,CAAa,OAAOC,OAAP,EAAgBC,MAAhB,KAA2B;cAC9C,IAAIC,SAAS,GAAG;gBACfC,EAAE,EAAE,YADW;gBAEfC,IAAI,EAAE,qDAFS;gBAGfC,UAAU,EAAEC,MAHG;gBAIfC,WAAW,EAAE,EAJE;gBAKfC,qBAAqB,EAAE,KAAKZ,OAAL,GAAeC,iBAAf;cALR,CAAhB,CAD8C,CAQ9C;;cACA,IAAIY,cAAc,GAAG,MAAO,IAAD,CAAcC,IAAd,CAAmBC,eAAnB,GAAqCC,YAArC,CAAkDV,SAAlD,CAA3B;cACA,IAAIW,OAAO,GAAGJ,cAAc,CAACK,UAAf,EAAd;cACA,IAAIC,UAAU,GAAGF,OAAO,CAACG,IAAR,CAAcC,GAAG,IAAIA,GAAG,CAACC,KAAJ,OAAgB,kBAArC,CAAjB;cACAH,UAAU,CAACI,WAAX,CAAuB,YAAY;gBAClCV,cAAc,CAACW,KAAf;gBACAX,cAAc,CAACY,OAAf;gBACA,OAAOrB,OAAO,CAAC,IAAD,CAAd;cACA,CAJD;cAMA,IAAIsB,YAAY,GAAGT,OAAO,CAACG,IAAR,CAAcC,GAAG,IAAIA,GAAG,CAACC,KAAJ,OAAgB,oBAArC,CAAnB;cACAI,YAAY,CAACH,WAAb,CAAyB,YAAY;gBACpCV,cAAc,CAACW,KAAf;gBACAX,cAAc,CAACY,OAAf;gBACA,OAAOpB,MAAM,EAAb;cACA,CAJwB,CAIvBsB,IAJuB,CAIlB,IAJkB,CAAzB;cAKAd,cAAc,CAACe,IAAf;YACA,CAzBM,CAAP;UA0BA;QACD;MAhCQ;IADD;EADmF,CAA/E,C"}